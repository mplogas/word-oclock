<!DOCTYPE html>
<html>
  <head>
    <title>WordClock Configuration</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Include Font Awesome for Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-p+UCUqJjZKKV0F2Vx1q8wHUvfdMb0bbCF0Q5sB2tbpC7fyE5H4UP5TqC9wUa8Uh9x8NhPJyj8UvhlZy1K3N59A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <div class="topnav">
      <h1>WordClock Configuration</h1>
      <a href="/update" class="link"><i class="fas fa-upload"></i> Firmware Update</a>
    </div>
    <div class="content">
      <h2>Light</h2>
      <div class="card-grid">
        <!-- Light Control Card -->
        <div class="card">
          <p class="card-title"><i class="fas fa-lightbulb"></i> Light</p>
          <div class="card-content">
            <div class="toggle-row">
              <label for="lightToggle">Status:</label>
              <label class="switch">
                <input type="checkbox" id="lightToggle" onchange="toggleLight(this.checked)">
                <span class="slider round"></span>
              </label>
            </div>
          </div>
        </div>
        
        <!-- Light Color Selection Card -->
        <div class="card">
          <p class="card-title"><i class="fas fa-palette"></i> Light Color</p>
          <div class="card-content">
            <div class="toggle-row">
              <label for="lightColorPicker">Select Color:</label>
              <input type="color" id="lightColorPicker" value="#ffffff" onchange="selectLightColor(this.value)">
            </div>
          </div>
        </div>
        
        <!-- Display Type Card -->
        <div class="card">
          <p class="card-title"><i class="fas fa-display"></i> Display Type</p>
          <div class="card-content">
            <div class="toggle-row">
              <label for="displayTypeToggle">Display Type:</label>
              <label class="switch">
                <input type="checkbox" id="displayTypeToggle" onchange="toggleDisplayType(this.checked)">
                <span class="slider round"></span>
              </label>
            </div>
          </div>
        </div>
        

      </div>
      
      <!-- System Section -->
      <h2>System</h2>
      <div class="card-grid">
        <!-- MQTT Configuration Card -->
        <div class="card">
          <p class="card-title"><i class="fas fa-cloud"></i> MQTT Broker</p>
          <div class="card-content">
            <form action="/saveMQTTSettings" method="POST">
              <div class="toggle-row">
                <label for="brokerIP">Broker IP:</label>
                <input type="text" id="brokerIP" name="brokerIP" placeholder="e.g., 192.168.1.100" required>
              </div>
              
              <div class="toggle-row">
                <label for="brokerPort">Port:</label>
                <input type="number" id="brokerPort" name="brokerPort" placeholder="e.g., 1883" required>
              </div>
              
              <div class="toggle-row">
                <label for="mqttUsername">Username:</label>
                <input type="text" id="mqttUsername" name="mqttUsername" placeholder="Your Username">
              </div>
              
              <div class="toggle-row">
                <label for="mqttPassword">Password:</label>
                <input type="password" id="mqttPassword" name="mqttPassword" placeholder="Your Password">
              </div>
              
              <div class="toggle-row">
                <label for="defaultTopic">Default Topic:</label>
                <input type="text" id="defaultTopic" name="defaultTopic" placeholder="e.g., home/wordclock">
              </div>
              
              <div class="toggle-row">
                <button type="submit">Save</button>
              </div>
            </form>
          </div>
        </div>
        
        <!-- NTP Settings Card -->
        <div class="card">
          <p class="card-title"><i class="fas fa-clock"></i> NTP Settings</p>
          <div class="card-content">
            <form action="/saveNTPSettings" method="POST">
              <!-- NTP Time Update Toggle -->
              <div class="toggle-row">
                <label for="ntpTimeUpdate">NTP Time Update:</label>
                <label class="switch">
                  <input type="checkbox" id="ntpTimeUpdate" name="ntpTimeUpdate" onchange="toggleNtpTimeUpdate(this.checked)">
                  <span class="slider round"></span>
                </label>
              </div>
              
              <!-- NTP Server Input -->
              <div id="ntpTimeUpdateContainer" style="display: none; width: 100%;">
                <div class="toggle-row">
                  <label for="ntpServer">NTP Server:</label>
                  <input type="text" id="ntpServer" name="ntpServer" placeholder="e.g., pool.ntp.org">
                </div>
              </div>
              
              <!-- NTP Auto Update Toggle -->
              <div class="toggle-row">
                <label for="ntpAutoUpdate">NTP Auto Update:</label>
                <label class="switch">
                  <input type="checkbox" id="ntpAutoUpdate" name="ntpAutoUpdate" onchange="toggleNtpAutoUpdate(this.checked)">
                  <span class="slider round"></span>
                </label>
              </div>
              
              <!-- Update Interval Input -->
              <div id="ntpAutoUpdateContainer" style="display: none; width: 100%;">
                <div class="toggle-row">
                  <label for="ntpInterval">Update Interval (Hours):</label>
                  <input type="number" id="ntpInterval" name="ntpInterval" placeholder="Hours" min="1">
                </div>
              </div>
              
              <!-- Submit Button -->
              <div class="toggle-row">
                <button type="submit">Save NTP Settings</button>
              </div>
            </form>
          </div>
        </div>

                <!-- Light Schedule Card -->
                <div class="card">
                  <p class="card-title"><i class="fas fa-clock"></i>Schedule</p>
                  <div class="card-content">
                    <div class="toggle-row">
                      <label for="lightScheduleToggle">Light Schedule:</label>
                      <label class="switch">
                        <input type="checkbox" id="lightScheduleToggle" onchange="toggleLightSchedule(this.checked)">
                        <span class="slider round"></span>
                      </label>
                    </div>
                    
                    <!-- Schedule Time Inputs -->
                    <div id="lightScheduleContainer" style="display: none; width: 100%;">
                      <div class="toggle-row">
                        <label for="startTime">Start Time:</label>
                        <input type="time" id="startTime" name="startTime">
                      </div>
                      
                      <div class="toggle-row">
                        <label for="endTime">End Time:</label>
                        <input type="time" id="endTime" name="endTime">
                      </div>
                    </div>
                  </div>
                </div>
        
        <!-- Additional System Cards can go here -->
      </div>
    </div>

    <!-- JavaScript Functions -->
    <script>
      function toggleLight(isChecked) {
        fetch(`/toggleLight?state=${isChecked}`)
          .then(response => response.text())
          .then(data => {
            console.log(data);
            document.getElementById('lightState').innerText = isChecked ? 'On' : 'Off';
          })
          .catch(error => console.error('Error:', error));
      }

      function selectLightColor(color) {
        fetch(`/setLightColor?color=${encodeURIComponent(color)}`)
          .then(response => response.text())
          .then(data => {
            document.getElementById('lightColorState').innerText = color;
          })
          .catch(error => console.error('Error:', error));
      }

      function toggleDisplayType(isChecked) {
        const stateText = document.getElementById('displayTypeState');
        stateText.innerText = isChecked ? 'Mode: Enhanced' : 'Mode: Standard';
        // Additional logic to switch display types can be added here
      }

      function toggleLightSchedule(isChecked) {
        const container = document.getElementById('lightScheduleContainer');
        if (isChecked) {
          container.style.display = 'block';
        } else {
          container.style.display = 'none';
        }
      }

      function toggleNtpTimeUpdate(isChecked) {
        const container = document.getElementById('ntpTimeUpdateContainer');
        if (isChecked) {
          container.style.display = 'block';
        } else {
          container.style.display = 'none';
        }
      }

      function toggleNtpAutoUpdate(isChecked) {
        const container = document.getElementById('ntpAutoUpdateContainer');
        if (isChecked) {
          container.style.display = 'block';
        } else {
          container.style.display = 'none';
        }
      }
    </script>
  </body>
</html>